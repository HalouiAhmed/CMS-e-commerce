<form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
    <div class="popup-container">
        <div class="d-flex justify-content-center">
            <h1>Formulaire d'inscription</h1>
        </div>
        <mat-divider></mat-divider>
        <div class="formulaire">
            <div class="row">
                <p class="col-sm">
                    <mat-form-field class="p-6" appearance="outline">
                        <mat-label>Prenom</mat-label>
                        <input required formControlName="firstName" matInput placeholder="Placeholder">
                        <mat-icon
                            [ngStyle]="{'color':(firstName.invalid && (firstName.dirty || firstName.touched)) ? 'red' : 'black' }"
                            matSuffix>account_circle</mat-icon>
                        <mat-hint align="end">{{firstName.value?.length || 0}}/50</mat-hint>
                        <mat-error
                            *ngIf="((firstName.invalid && (firstName.dirty || firstName.touched)) && firstName.errors.required)">
                            champs
                            requis
                        </mat-error>
                    </mat-form-field>
                </p>
                <p class="col-sm">
                    <mat-form-field class="p-6" appearance="outline">
                        <mat-label>Nom</mat-label>
                        <input required formControlName="lastName" matInput placeholder="Placeholder">
                        <mat-icon
                            [ngStyle]="{'color':(lastName.invalid && (lastName.dirty || lastName.touched)) ? 'red' : 'black' }"
                            matSuffix>account_circle</mat-icon>
                        <mat-hint align="end">{{lastName.value?.length || 0}}/50</mat-hint>
                        <mat-error
                            *ngIf="((lastName.invalid && (lastName.dirty || lastName.touched)) && lastName.errors.required)">
                            champs
                            requis
                        </mat-error>
                    </mat-form-field>
                </p>
            </div>
            <div class="row">
                <p class="col-sm">
                    <mat-form-field class="p-6" appearance="outline">
                        <mat-label>Email</mat-label>
                        <input required formControlName="email" matInput placeholder="Placeholder">
                        <mat-icon
                            [ngStyle]="{'color':(email.invalid && (email.dirty || email.touched)) ? 'red' : 'black' }"
                            matSuffix>
                            mail_outline</mat-icon>
                        <mat-hint>* ex : email@example.com</mat-hint>
                        <mat-hint align="end">{{email.value?.length || 0}}/50</mat-hint>
                        <mat-error *ngIf="((email.invalid && (email.dirty || email.touched)) && email.errors.required)">
                            champs
                            requis
                        </mat-error>
                        <mat-error
                            *ngIf="((email.invalid && (email.dirty || email.touched)) && (email.errors.email && !email.errors.required))">
                            l'adresse mail n'est pas valide
                        </mat-error>
                    </mat-form-field>
                </p>
                <p class="col-sm">
                    <mat-form-field class="p-6" appearance="outline">
                        <mat-label>Adresse</mat-label>
                        <input required formControlName="adresse" matInput placeholder="Placeholder">
                        <mat-icon
                            [ngStyle]="{'color':(adresse.invalid && (adresse.dirty || adresse.touched)) ? 'red' : 'black' }"
                            matSuffix>share_location</mat-icon>
                        <mat-hint align="end">{{adresse.value?.length || 0}}/50</mat-hint>
                        <mat-error
                            *ngIf="((adresse.invalid && (adresse.dirty || adresse.touched)) && adresse.errors.required)">
                            champs
                            requis
                        </mat-error>
                    </mat-form-field>
                </p>
            </div>
            <div class="row">
                <p class="col-sm">
                    <mat-form-field appearance="outline">
                        <mat-label>Mot de Passe</mat-label>
                        <input required matInput maxlength="50" [type]="hidePassword ? 'password' : 'text'"
                            formControlName="password" placeholder="Placeholder">
                        <mat-icon
                            [ngStyle]="{'color':(password.invalid && (password.dirty || password.touched)) ? 'red' : 'black' }"
                            class="password_icon" (click)="hidePassword = !hidePassword" matSuffix>{{hidePassword ?
                            'visibility_off'
                            :
                            'visibility'}}</mat-icon>
                        <mat-hint>* ex : Password1@</mat-hint>
                        <mat-hint align="end">{{password.value?.length || 0}}/50</mat-hint>
                        <mat-error
                            *ngIf="(password.invalid && (password.dirty || password.touched)) && password.errors.required">
                            champs requis</mat-error>
                        <mat-error
                            *ngIf="(password.invalid && (password.dirty || password.touched)) && password.errors.pattern">
                            Minimum 8 caractères, une majuscule, un chiffre et un caractère spécial</mat-error>
                    </mat-form-field>
                </p>
                <p class="col-sm">
                    <mat-form-field appearance="outline">
                        <mat-label>Confirmer le Mot de Passe</mat-label>
                        <input [errorStateMatcher]="matcher" required matInput maxlength="50"
                            [type]="hideRepeatPassword ? 'password' : 'text'" formControlName="repeatPassword"
                            placeholder="Placeholder">
                        <mat-icon
                            [ngStyle]="{'color':(repeatPassword.invalid && (repeatPassword.dirty || repeatPassword.touched)) ? 'red' : 'black' }"
                            class="password_icon" (click)="hideRepeatPassword = !hideRepeatPassword" matSuffix>
                            {{hideRepeatPassword ?
                            'visibility_off' :
                            'visibility'}}</mat-icon>
                        <mat-hint>* ex : Password1@</mat-hint>
                        <mat-hint align="end">{{repeatPassword.value?.length || 0}}/50</mat-hint>
                        <mat-error
                            *ngIf="(repeatPassword.invalid && (repeatPassword.dirty || repeatPassword.touched)) && repeatPassword.errors.required">
                            champs requis</mat-error>
                        <mat-error
                            *ngIf="((repeatPassword.dirty || repeatPassword.touched))  && (!isPasswordConfirmationValid() && !repeatPassword.errors?.required)">
                            le mot de passe n'est pas correct</mat-error>
                    </mat-form-field>
                </p>
            </div>
            <div class="row">
                <p class="col-sm">
                    <mat-form-field appearance="outline">
                        <mat-label>Numéro de téléphone</mat-label>
                        <input type="tel" maxlength="10" required formControlName="tel" matInput placeholder="Placeholder" pattern="[0-9]{10}">
                        <mat-icon [ngStyle]="{'color':(tel.invalid && (tel.dirty || tel.touched)) ? 'red' : 'black' }"
                            matSuffix>local_phone</mat-icon>
                        <mat-hint align="end">{{tel.value?.length || 0}}/10</mat-hint>
                        <mat-hint>* ex : 0600000000</mat-hint>

                        <mat-error *ngIf="((tel.invalid && (tel.dirty || tel.touched)) && tel.errors.required)">
                            champs
                            requis
                        </mat-error>

                    </mat-form-field>
                </p>
                <p class="col-sm">
                    <mat-radio-group [formControl]="acceptCGU">
                        <mat-radio-button value="true">
                            J'ai lu et j'accepte les
                            <a href="#" style="color:var(--primary-default)">Conditions Générales d'Utilisation
                                (CGU)</a>
                        </mat-radio-button>
                    </mat-radio-group>
                </p>
            </div>
        </div>
        <div class="d-flex justify-content-center" mat-dialog-actions>
            <button *ngIf="!loading" type="submit" mat-raised-button [disabled]="!registerForm.valid">S'inscrire</button>
            <mat-progress-spinner *ngIf="loading" strokeWidth=40 diameter=40 class="spinner" mode="indeterminate">
            </mat-progress-spinner>
        </div>
    </div>

</form>